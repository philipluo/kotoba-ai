<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»Ÿè®¡ - è¨€è‘‰AI</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.0/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg { background: linear-gradient(135deg, #fdf2f8 0%, #e0f2fe 100%); }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <nav class="navbar bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex-1">
                <a href="../index.html" class="btn btn-ghost text-xl">
                    <span class="text-2xl">ğŸŒ¸</span>
                    <span class="font-bold">è¨€è‘‰AI</span>
                </a>
            </div>
            <div class="flex-none">
                <a href="../index.html" class="btn btn-ghost btn-sm">â† è¿”å›é¦–é¡µ</a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-center mb-8">ğŸ“Š å­¦ä¹ ç»Ÿè®¡</h1>

        <!-- æ€»ä½“ç»Ÿè®¡ -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="stats shadow bg-white">
                <div class="stat">
                    <div class="stat-title">æ€»å½•å…¥æ•°</div>
                    <div class="stat-value text-primary" id="totalEntries">-</div>
                    <div class="stat-desc">å¥å­/å•è¯/çŸ­è¯­</div>
                </div>
            </div>
            <div class="stats shadow bg-white">
                <div class="stat">
                    <div class="stat-title">æ€»å•è¯æ•°</div>
                    <div class="stat-value text-secondary" id="totalWords">-</div>
                    <div class="stat-desc">åˆ†è¯ç»Ÿè®¡</div>
                </div>
            </div>
            <div class="stats shadow bg-white">
                <div class="stat">
                    <div class="stat-title">åŠ¨è¯æ•°é‡</div>
                    <div class="stat-value text-accent" id="totalVerbs">-</div>
                    <div class="stat-desc">å·²æŒæ¡åŠ¨è¯</div>
                </div>
            </div>
        </div>

        <!-- ä»Šæ—¥ç»Ÿè®¡ -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <div class="card bg-white shadow-lg">
                <div class="card-body">
                    <h2 class="card-title">ğŸ“… ä»Šæ—¥å­¦ä¹ </h2>
                    <div class="text-center py-6">
                        <div class="text-5xl font-bold text-info" id="todayNew">-</div>
                        <div class="text-gray-500 mt-2">ä»Šæ—¥æ–°å½•å…¥</div>
                    </div>
                </div>
            </div>
            <div class="card bg-white shadow-lg">
                <div class="card-body">
                    <h2 class="card-title">ğŸ”¥ è¿ç»­å­¦ä¹ </h2>
                    <div class="text-center py-6">
                        <div class="text-5xl font-bold text-warning" id="streakDays">-</div>
                        <div class="text-gray-500 mt-2">å¤©</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¯æ€§åˆ†å¸ƒ -->
        <div class="card bg-white shadow-lg">
            <div class="card-body">
                <h2 class="card-title mb-4">ğŸ“ˆ è¯æ€§åˆ†å¸ƒ</h2>
                <div id="typeStats">
                    <div class="flex justify-center items-center h-32">
                        <span class="loading loading-spinner loading-md text-primary"></span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadStats();
        });

        async function loadStats() {
            try {
                const response = await fetch('/api/stats/overview');
                const result = await response.json();

                if (!result.success) {
                    document.getElementById('typeStats').innerHTML = '<p class="text-center text-gray-500">åŠ è½½å¤±è´¥</p>';
                    return;
                }

                const data = result.data;

                // æ›´æ–°æ•°å­—
                document.getElementById('totalEntries').textContent = data.total_entries || 0;
                document.getElementById('totalWords').textContent = data.total_words || 0;
                document.getElementById('totalVerbs').textContent = data.total_verbs || 0;
                document.getElementById('todayNew').textContent = data.today_new || 0;
                document.getElementById('streakDays').textContent = data.streak_days || 0;

                // è¯æ€§åˆ†å¸ƒ
                const typeNames = {
                    'noun': 'åè¯',
                    'verb': 'åŠ¨è¯',
                    'adjective_i': 'ã„å½¢å®¹è¯',
                    'adjective_na': 'ãªå½¢å®¹è¯',
                    'particle': 'åŠ©è¯',
                    'pronoun': 'ä»£è¯',
                    'adverb': 'å‰¯è¯',
                    'aux_verb': 'åŠ©åŠ¨è¯',
                    'proper_noun': 'ä¸“æœ‰åè¯'
                };

                const typeStats = data.type_stats || {};
                let html = '<div class="grid grid-cols-2 md:grid-cols-4 gap-4">';
                
                for (const [type, count] of Object.entries(typeStats)) {
                    const name = typeNames[type] || type;
                    html += `
                        <div class="bg-gray-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-primary">${count}</div>
                            <div class="text-gray-600 text-sm">${name}</div>
                        </div>
                    `;
                }
                
                html += '</div>';
                document.getElementById('typeStats').innerHTML = html;

            } catch (error) {
                console.error('åŠ è½½ç»Ÿè®¡å¤±è´¥:', error);
                document.getElementById('typeStats').innerHTML = '<p class="text-center text-gray-500">åŠ è½½å¤±è´¥</p>';
            }
        }
    </script>
</body>
</html>
